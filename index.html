<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8" />
<title>Focis Mini J√°t√©k ‚Äì Ir√°ny√≠that√≥ l√∂v√©s</title>
<style>
  body {
    background: #6ab04c;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    text-align: center;
    margin: 0;
    overflow: hidden;
  }
  canvas {
    background: #4caf50;
    display: block;
    margin: 0 auto;
    border: 4px solid white;
    box-shadow: 0 0 10px #3a7d2e;
    cursor: crosshair;
  }
  h1 {
    color: white;
    text-shadow: 2px 2px 5px #27411e;
    margin-top: 10px;
  }
</style>
</head>
<body>
<h1>‚öΩ B√ºntet≈ër√∫g√°s ‚Äì T√∂bb helyr≈ël, ir√°ny√≠that√≥ l√∂v√©s</h1>
<canvas id="gameCanvas" width="800" height="500"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let kapusX = 375;
let kapusSeb = 4;
let pont = 0;

let labdaX = 400;
let labdaY = 450;
let labdaMozog = false;

let celX = 400;
let celY = 100;
let labdaSeb = 12;

// P√°lya rajzol√°sa
function rajzolPalya() {
  ctx.fillStyle = '#4caf50';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  ctx.strokeStyle = 'white';
  ctx.lineWidth = 4;

  ctx.beginPath();
  ctx.moveTo(300, 50);
  ctx.lineTo(500, 50);
  ctx.lineTo(500, 150);
  ctx.lineTo(300, 150);
  ctx.closePath();
  ctx.stroke();

  ctx.beginPath();
  ctx.moveTo(300, 150);
  ctx.lineTo(500, 150);
  ctx.stroke();

  ctx.beginPath();
  ctx.arc(400, 150, 100, Math.PI, 2 * Math.PI);
  ctx.stroke();
}

// Kapuh√°l√≥ rajzol√°sa
function rajzolKapuhalo() {
  ctx.strokeStyle = '#ccc';
  ctx.lineWidth = 1;

  for (let x = 300; x <= 500; x += 20) {
    ctx.beginPath();
    ctx.moveTo(x, 50);
    ctx.lineTo(x, 150);
    ctx.stroke();
  }

  for (let y = 50; y <= 150; y += 20) {
    ctx.beginPath();
    ctx.moveTo(300, y);
    ctx.lineTo(500, y);
    ctx.stroke();
  }
}

// Kapus rajzol√°sa
function rajzolKapus(x, y) {
  ctx.fillStyle = '#f5c9a3';
  ctx.beginPath();
  ctx.arc(x + 25, y + 15, 15, 0, Math.PI * 2);
  ctx.fill();
  ctx.strokeStyle = '#222';
  ctx.stroke();

  ctx.fillStyle = 'blue';
  ctx.fillRect(x + 10, y + 30, 30, 50);

  ctx.fillStyle = '#0055cc';
  ctx.fillRect(x, y + 30, 10, 40);
  ctx.fillRect(x + 40, y + 30, 10, 40);

  ctx.fillStyle = '#222';
  ctx.fillRect(x + 10, y + 80, 12, 30);
  ctx.fillRect(x + 28, y + 80, 12, 30);
}

// Labda rajzol√°sa √°rny√©kkal
function rajzolLabda(x, y) {
  let gradient = ctx.createRadialGradient(x - 5, y - 5, 5, x, y, 15);
  gradient.addColorStop(0, 'white');
  gradient.addColorStop(1, '#888');
  ctx.fillStyle = gradient;
  ctx.beginPath();
  ctx.arc(x, y, 15, 0, Math.PI * 2);
  ctx.fill();
  ctx.strokeStyle = '#444';
  ctx.stroke();

  ctx.fillStyle = 'black';
  ctx.beginPath();
  ctx.moveTo(x - 7, y - 5);
  ctx.lineTo(x - 2, y + 2);
  ctx.lineTo(x + 2, y - 2);
  ctx.closePath();
  ctx.fill();
}

// Pontsz√°m √©s instrukci√≥k megjelen√≠t√©se
function rajzolSzoveg() {
  ctx.fillStyle = 'white';
  ctx.font = "24px Arial";
  ctx.fillText("Pont: " + pont, 20, 40);
  ctx.font = "18px Arial";
  ctx.fillText("Kattints a p√°lya alj√°n a labda hely√©hez, mozgasd az egeret az ir√°nyhoz, majd nyomj SPACE-t a l√∂v√©shez.", 20, 480);
}

// Kapus mozg√°s
function kapusMozgas() {
  kapusX += kapusSeb;
  if (kapusX <= 300 || kapusX >= 450) kapusSeb *= -1;
}

// Labda mozg√°s
function labdaMozgasFunc() {
  if (labdaMozog) {
    let dx = celX - labdaX;
    let dy = celY - labdaY;
    let tav = Math.sqrt(dx * dx + dy * dy);
    if (tav < labdaSeb) {
      // El√©rte a c√©lpontot, ellen≈ërizz√ºk, hogy g√≥l-e
      labdaMozog = false;
      // G√≥l, ha a labda √°tl√©pi a kapuvonalat a kapu sz√©less√©g√©n bel√ºl
      if (labdaY <= 150 && labdaX >= 300 && labdaX <= 500) {
        pont++;
        alert("G√ì√ì√ìL! üéâ");
      } else {
        alert("Nem siker√ºlt!");
      }
      labdaX = 400;
      labdaY = 450;
      celX = 400;
      celY = 100;
    } else {
      labdaX += (dx / tav) * labdaSeb;
      labdaY += (dy / tav) * labdaSeb;
    }
  }
}

canvas.addEventListener("click", (e) => {
  if (!labdaMozog) {
    let rect = canvas.getBoundingClientRect();
    let clickX = e.clientX - rect.left;
    let clickY = e.clientY - rect.top;
    if (clickY > 400) {  // csak a p√°lya alj√°n lehet helyet v√°lasztani
      labdaX = clickX;
      labdaY = clickY;
      celX = clickX;
      celY = clickY - 350;
    }
  }
});

canvas.addEventListener("mousemove", (e) => {
  if (!labdaMozog) {
    let rect = canvas.getBoundingClientRect();
    celX = e.clientX - rect.left;
    celY = e.clientY - rect.top;
  }
});

window.addEventListener("keydown", (e) => {
  if (e.code === "Space" && !labdaMozog) {
    labdaMozog = true;
  }
});

function jatek() {
  rajzolPalya();
  rajzolKapuhalo();
  rajzolKapus(kapusX, 90);
  rajzolLabda(labdaX, labdaY);

  rajzolSzoveg();

  kapusMozgas();
  labdaMozgasFunc();

  requestAnimationFrame(jatek);
}

jatek();
</script>
</body>
</html>
